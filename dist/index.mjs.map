{"version":3,"sources":["../src/normalizer/rules/arrows.ts","../src/normalizer/index.ts","../src/core/parser.ts","../src/runtimes/node-native.ts","../src/index.ts"],"sourcesContent":["/**\r\n * Arrow normalization rules (ported from legacy JS implementation)\r\n */\r\n\r\nconst ARROW_TYPES = {\r\n  SOLID: '->',\r\n  DASHED: '-->',\r\n  THICK: '->>',\r\n  DOTTED: '.>',\r\n  SOLID_LEFT: '<-',\r\n  DASHED_LEFT: '<--',\r\n  THICK_LEFT: '<<-',\r\n  DOTTED_LEFT: '<.'\r\n} as const;\r\n\r\ntype ArrowType = (typeof ARROW_TYPES)[keyof typeof ARROW_TYPES];\r\n\r\nfunction detectArrowType(trimmed: string): ArrowType | null {\r\n  const orderedArrows: ArrowType[] = [\r\n    ARROW_TYPES.DASHED,\r\n    ARROW_TYPES.THICK,\r\n    ARROW_TYPES.DASHED_LEFT,\r\n    ARROW_TYPES.THICK_LEFT,\r\n    ARROW_TYPES.DOTTED,\r\n    ARROW_TYPES.DOTTED_LEFT,\r\n    ARROW_TYPES.SOLID,\r\n    ARROW_TYPES.SOLID_LEFT\r\n  ];\r\n\r\n  for (const arrow of orderedArrows) {\r\n    if (trimmed.includes(arrow)) return arrow;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction parseArrow(trimmed: string): {\r\n  arrowType: ArrowType;\r\n  source: string | null;\r\n  target: string | null;\r\n  label: string | null;\r\n} | null {\r\n  const arrowType = detectArrowType(trimmed);\r\n  if (!arrowType) return null;\r\n\r\n  const parts = trimmed.split(arrowType);\r\n  const source = parts[0]?.trim() || null;\r\n  const afterArrow = parts[1] ? parts[1].trim() : '';\r\n\r\n  let target: string | null = null;\r\n  let label: string | null = null;\r\n\r\n  if (afterArrow) {\r\n    if (afterArrow.startsWith(':')) {\r\n      label = afterArrow.substring(1).trim();\r\n    } else {\r\n      const colonIndex = afterArrow.indexOf(':');\r\n      if (colonIndex !== -1) {\r\n        target = afterArrow.substring(0, colonIndex).trim() || null;\r\n        label = afterArrow.substring(colonIndex + 1).trim() || null;\r\n      } else {\r\n        target = afterArrow;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { arrowType, source, target, label };\r\n}\r\n\r\nexport function normalizeArrow(trimmed: string, indent = ''): string | null {\r\n  const parsed = parseArrow(trimmed);\r\n  if (!parsed) return null;\r\n\r\n  const { arrowType, source, target, label } = parsed;\r\n\r\n  let normalized = '';\r\n  if (source) normalized += source;\r\n  if (normalized.length > 0) normalized += ' ';\r\n  normalized += arrowType;\r\n  if (target) normalized += ' ' + target;\r\n  if (label) normalized += ' :' + label;\r\n\r\n  return `${indent}${normalized}`.trimEnd();\r\n}\r\n","import { normalizeArrow as normalizeArrowRule } from './rules/arrows';\r\nimport type { NormalizationMetadata, NormalizationResult } from '../core/types';\r\n\r\ntype NormalizerOptions = {\r\n  debug?: boolean;\r\n  preserveComments?: boolean;\r\n  preserveWhitespace?: boolean;\r\n};\r\n\r\ntype NormalizerContext = {\r\n  hasSeenContent: boolean;\r\n  inDiagram: boolean;\r\n  lastNodeType: string | null;\r\n  nodeCount: number;\r\n  circleNodePositions: number[];\r\n  inFloatingNote: boolean;\r\n  inPartition: number;\r\n  inFork: boolean;\r\n  inSplit: boolean;\r\n};\r\n\r\nexport default class PlantUMLNormalizer {\r\n  private debug: boolean;\r\n  private preserveComments: boolean;\r\n  private preserveWhitespace: boolean;\r\n  private diagramType: string | null;\r\n  private context: NormalizerContext;\r\n\r\n  constructor(options: NormalizerOptions = {}) {\r\n    this.debug = options.debug ?? false;\r\n    this.preserveComments = options.preserveComments !== false;\r\n    this.preserveWhitespace = options.preserveWhitespace ?? false;\r\n    this.diagramType = null;\r\n    this.context = {\r\n      hasSeenContent: false,\r\n      inDiagram: false,\r\n      lastNodeType: null,\r\n      nodeCount: 0,\r\n      circleNodePositions: [],\r\n      inFloatingNote: false,\r\n      inPartition: 0,\r\n      inFork: false,\r\n      inSplit: false\r\n    };\r\n  }\r\n\r\n  normalize(source: string): NormalizationResult {\r\n    this.resetContext();\r\n\r\n    const lines = source.split('\\n');\r\n    const normalizedLines: string[] = [];\r\n    const normalizedLineToOriginalLine: number[] = [];\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const line = lines[i];\r\n      const normalized = this.normalizeLine(line, i, lines);\r\n\r\n      if (normalized !== null) {\r\n        if (Array.isArray(normalized)) {\r\n          normalizedLines.push(...normalized);\r\n          for (let k = 0; k < normalized.length; k++) normalizedLineToOriginalLine.push(i);\r\n        } else {\r\n          normalizedLines.push(normalized);\r\n          normalizedLineToOriginalLine.push(i);\r\n        }\r\n      }\r\n    }\r\n\r\n    const postProcessed = this.postProcess(normalizedLines);\r\n\r\n    return {\r\n      normalized: postProcessed.join('\\n'),\r\n      metadata: {\r\n        ...this.getMetadata(),\r\n        sourceMap: { normalizedLineToOriginalLine }\r\n      }\r\n    };\r\n  }\r\n\r\n  private normalizeLine(line: string, lineIndex: number, allLines: string[]): string | string[] | null {\r\n    const trimmed = line.trim();\r\n\r\n    this.updateContext(trimmed);\r\n\r\n    if (!trimmed) {\r\n      return this.preserveWhitespace ? line : '';\r\n    }\r\n\r\n    if (trimmed.startsWith('@startuml')) {\r\n      this.context.inDiagram = true;\r\n      this.detectDiagramType(allLines, lineIndex);\r\n      return line;\r\n    }\r\n\r\n    if (trimmed === '@enduml') {\r\n      this.context.inDiagram = false;\r\n      return line;\r\n    }\r\n\r\n    if (!this.context.inDiagram) return line;\r\n\r\n    if (trimmed.startsWith(\"'\") || trimmed.startsWith(\"/'\") || trimmed.startsWith(\"'/\")) {\r\n      return this.preserveComments ? line : null;\r\n    }\r\n\r\n    let normalized = line;\r\n\r\n    const circleResult = this.normalizeCircleNode(normalized, trimmed);\r\n    if (circleResult !== normalized) return circleResult;\r\n\r\n    const activityResult = this.normalizeActivityNode(normalized, trimmed);\r\n    if (activityResult !== normalized) return activityResult;\r\n\r\n    const arrowResult = this.normalizeArrow(normalized, trimmed);\r\n    if (arrowResult !== normalized) return arrowResult;\r\n\r\n    const controlResult = this.normalizeControlFlow(normalized, trimmed);\r\n    if (controlResult !== normalized) return controlResult;\r\n\r\n    const groupingResult = this.normalizeGrouping(normalized, trimmed);\r\n    if (groupingResult !== normalized) return groupingResult;\r\n\r\n    const noteResult = this.normalizeNote(normalized, trimmed);\r\n    if (noteResult !== normalized) return noteResult;\r\n\r\n    const directiveResult = this.normalizeDirective(normalized, trimmed);\r\n    if (directiveResult !== normalized) return directiveResult;\r\n\r\n    return normalized;\r\n  }\r\n\r\n  private getIndent(line: string): string {\r\n    const match = line.match(/^(\\s*)/);\r\n    return match ? match[1] : '';\r\n  }\r\n\r\n  private normalizeCircleNode(line: string, trimmed: string): string {\r\n    if (trimmed !== '(*)') return line;\r\n\r\n    this.context.circleNodePositions.push(this.context.nodeCount);\r\n\r\n    if (!this.context.hasSeenContent) {\r\n      this.context.hasSeenContent = true;\r\n      this.context.lastNodeType = 'start';\r\n      this.context.nodeCount++;\r\n      return this.preserveWhitespace ? line.replace('(*)', 'start') : 'start';\r\n    }\r\n\r\n    this.context.lastNodeType = 'stop';\r\n    this.context.nodeCount++;\r\n    return this.preserveWhitespace ? line.replace('(*)', 'stop') : 'stop';\r\n  }\r\n\r\n  private normalizeActivityNode(line: string, trimmed: string): string {\r\n    const activityMatch = trimmed.match(/^:(.+);$/);\r\n    if (activityMatch) {\r\n      this.context.hasSeenContent = true;\r\n      this.context.lastNodeType = 'activity';\r\n      this.context.nodeCount++;\r\n\r\n      const content = activityMatch[1].trim();\r\n      const indent = this.getIndent(line);\r\n      return `${indent}:${content};`;\r\n    }\r\n    return line;\r\n  }\r\n\r\n  private normalizeArrow(line: string, trimmed: string): string {\r\n    const indent = this.getIndent(line);\r\n    const normalized = normalizeArrowRule(trimmed, indent);\r\n\r\n    if (normalized !== null) {\r\n      this.context.hasSeenContent = true;\r\n      return normalized;\r\n    }\r\n\r\n    return line;\r\n  }\r\n\r\n  private normalizeControlFlow(line: string, trimmed: string): string {\r\n    const indent = this.getIndent(line);\r\n\r\n    if (trimmed.startsWith('if ') || trimmed.match(/^if\\s*\\(/)) {\r\n      this.context.hasSeenContent = true;\r\n\r\n      const match = trimmed.match(/^if\\s*\\((.+?)\\)\\s*then(?:\\s*\\((.+?)\\))?$/);\r\n      if (match) {\r\n        const condition = match[1].trim();\r\n        const label = match[2] ? ` (${match[2].trim()})` : '';\r\n        return `${indent}if (${condition}) then${label}`;\r\n      }\r\n\r\n      const simpleMatch = trimmed.match(/^if\\s*\\((.+?)\\)\\s*then$/);\r\n      if (simpleMatch) {\r\n        const condition = simpleMatch[1].trim();\r\n        return `${indent}if (${condition}) then`;\r\n      }\r\n    }\r\n\r\n    if (trimmed.startsWith('while ') || trimmed.match(/^while\\s*\\(/)) {\r\n      this.context.hasSeenContent = true;\r\n      const match = trimmed.match(/^while\\s*\\((.+?)\\)(?:\\s*is\\s*\\((.+?)\\))?$/);\r\n      if (match) {\r\n        const condition = match[1].trim();\r\n        const label = match[2] ? ` is (${match[2].trim()})` : '';\r\n        return `${indent}while (${condition})${label}`;\r\n      }\r\n    }\r\n\r\n    if (trimmed === 'repeat') {\r\n      this.context.hasSeenContent = true;\r\n      return `${indent}repeat`;\r\n    }\r\n\r\n    const controlKeywords = ['else', 'elseif', 'endif', 'endwhile'] as const;\r\n    for (const keyword of controlKeywords) {\r\n      if (trimmed === keyword || trimmed.startsWith(keyword + ' ') || trimmed.startsWith(keyword + '(')) {\r\n        if (keyword === 'else') {\r\n          const match = trimmed.match(/^else(?:\\s*\\((.+?)\\))?$/);\r\n          if (match) {\r\n            const label = match[1] ? ` (${match[1].trim()})` : '';\r\n            return `${indent}else${label}`;\r\n          }\r\n        }\r\n\r\n        if (keyword === 'elseif') {\r\n          const match = trimmed.match(/^elseif\\s*\\((.+?)\\)\\s*then(?:\\s*\\((.+?)\\))?$/);\r\n          if (match) {\r\n            const condition = match[1].trim();\r\n            const label = match[2] ? ` (${match[2].trim()})` : '';\r\n            return `${indent}elseif (${condition}) then${label}`;\r\n          }\r\n        }\r\n\r\n        if (keyword === 'endwhile') {\r\n          const match = trimmed.match(/^endwhile(?:\\s*\\((.+?)\\))?$/);\r\n          if (match) {\r\n            const label = match[1] ? ` (${match[1].trim()})` : '';\r\n            return `${indent}endwhile${label}`;\r\n          }\r\n        }\r\n\r\n        if (trimmed === keyword) {\r\n          return `${indent}${keyword}`;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (trimmed === 'fork' || trimmed === 'fork again' || trimmed === 'end fork') {\r\n      return `${indent}${trimmed}`;\r\n    }\r\n\r\n    if (trimmed === 'split' || trimmed === 'split again' || trimmed === 'end split') {\r\n      return `${indent}${trimmed}`;\r\n    }\r\n\r\n    // Pass-through for repeat while (legacy kept as-is)\r\n    if (trimmed.startsWith('repeat while')) {\r\n      this.context.hasSeenContent = true;\r\n      return `${indent}${trimmed.replace(/\\s+/g, ' ').trim()}`;\r\n    }\r\n\r\n    return line;\r\n  }\r\n\r\n  private normalizeGrouping(line: string, trimmed: string): string {\r\n    if (trimmed.startsWith('partition ')) {\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n\r\n      const match = trimmed.match(/^partition\\s+(.+?)(?:\\s+(#[\\w]+))?\\s*\\{?$/);\r\n      if (match) {\r\n        const name = match[1].trim().replace(/^[\"']|[\"']$/g, '');\r\n        const color = match[2] ? ` ${match[2]}` : '';\r\n        const hasOpenBrace = trimmed.endsWith('{');\r\n        this.context.inPartition++;\r\n        return `${indent}partition \"${name}\"${color}${hasOpenBrace ? ' {' : ''}`;\r\n      }\r\n    }\r\n\r\n    if (trimmed === '}' && this.context.inPartition > 0) {\r\n      this.context.inPartition--;\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n      return `${indent}}`;\r\n    }\r\n\r\n    const swimlaneMatch = trimmed.match(/^\\|(.+?)\\|$/);\r\n    if (swimlaneMatch) {\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n      const name = swimlaneMatch[1].trim();\r\n      return `${indent}|${name}|`;\r\n    }\r\n\r\n    return line;\r\n  }\r\n\r\n  private normalizeNote(line: string, trimmed: string): string {\r\n    if (trimmed.startsWith('note ')) {\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n\r\n      const singleLineMatch = trimmed.match(/^note\\s+(left|right|top|bottom)\\s*:\\s*(.+)$/);\r\n      if (singleLineMatch) {\r\n        const position = singleLineMatch[1];\r\n        const content = singleLineMatch[2].trim();\r\n        return `${indent}note ${position}: ${content}`;\r\n      }\r\n\r\n      const multiLineMatch = trimmed.match(/^note\\s+(left|right|top|bottom)$/);\r\n      if (multiLineMatch) {\r\n        this.context.inFloatingNote = true;\r\n        const position = multiLineMatch[1];\r\n        return `${indent}note ${position}`;\r\n      }\r\n    }\r\n\r\n    if (trimmed === 'end note' && this.context.inFloatingNote) {\r\n      this.context.inFloatingNote = false;\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n      return `${indent}end note`;\r\n    }\r\n\r\n    if (this.context.inFloatingNote) return line;\r\n\r\n    return line;\r\n  }\r\n\r\n  private normalizeDirective(line: string, trimmed: string): string {\r\n    if (trimmed.startsWith('title ')) {\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n      const title = trimmed.substring(6).trim();\r\n      return `${indent}title ${title}`;\r\n    }\r\n\r\n    if (trimmed.startsWith('skinparam ')) {\r\n      const indent = this.preserveWhitespace ? this.getIndent(line) : '';\r\n      const match = trimmed.match(/^skinparam\\s+(\\w+)\\s+(.+)$/);\r\n      if (match) {\r\n        const param = match[1];\r\n        const value = match[2].trim();\r\n        return `${indent}skinparam ${param} ${value}`;\r\n      }\r\n    }\r\n\r\n    return line;\r\n  }\r\n\r\n  private postProcess(lines: string[]): string[] {\r\n    // Legacy placeholder: no structural modifications today.\r\n    // Future: refine circle node interpretation across the diagram.\r\n    void lines;\r\n    return lines;\r\n  }\r\n\r\n  private detectDiagramType(lines: string[], startIndex: number): void {\r\n    for (let i = startIndex + 1; i < Math.min(startIndex + 20, lines.length); i++) {\r\n      const line = lines[i].trim();\r\n\r\n      if (line.includes('participant') || line.includes('actor')) {\r\n        this.diagramType = 'sequence';\r\n        break;\r\n      }\r\n      if (line.includes('class ') || line.includes('interface ')) {\r\n        this.diagramType = 'class';\r\n        break;\r\n      }\r\n      if (line.includes('state ')) {\r\n        this.diagramType = 'state';\r\n        break;\r\n      }\r\n      if (line.startsWith(':') || line.includes('start') || line.includes('(*)')) {\r\n        this.diagramType = 'activity';\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateContext(_trimmed: string): void {\r\n    // Intentionally left minimal; nodeCount updated in rules.\r\n  }\r\n\r\n  private resetContext(): void {\r\n    this.context = {\r\n      hasSeenContent: false,\r\n      inDiagram: false,\r\n      lastNodeType: null,\r\n      nodeCount: 0,\r\n      circleNodePositions: [],\r\n      inFloatingNote: false,\r\n      inPartition: 0,\r\n      inFork: false,\r\n      inSplit: false\r\n    };\r\n    this.diagramType = null;\r\n  }\r\n\r\n  private getMetadata(): NormalizationMetadata {\r\n    return {\r\n      diagramType: this.diagramType,\r\n      nodeCount: this.context.nodeCount,\r\n      hasCircleNodes: this.context.circleNodePositions.length > 0,\r\n      circleNodeCount: this.context.circleNodePositions.length\r\n    };\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  private log(...args: any[]): void {\r\n    if (this.debug) {\r\n      // eslint-disable-next-line no-console\r\n      console.log('[PlantUMLNormalizer]', ...args);\r\n    }\r\n  }\r\n}\r\n","import PlantUMLNormalizer from '../normalizer';\r\nimport type { PlantUMLBackend } from './backend';\r\nimport type { NormalizationResult, ParseOptions, ParseResult, ParserInitOptions } from './types';\r\n\r\nexport default class PlantUMLParser {\r\n  private readonly options: Required<ParserInitOptions>;\r\n  private readonly normalizer: PlantUMLNormalizer;\r\n  private readonly backend: PlantUMLBackend;\r\n\r\n  constructor(backend: PlantUMLBackend, options: ParserInitOptions = {}) {\r\n    this.backend = backend;\r\n    this.options = {\r\n      debug: options.debug ?? false,\r\n      preserveComments: options.preserveComments ?? true,\r\n      preserveWhitespace: options.preserveWhitespace ?? false,\r\n      skipNormalization: options.skipNormalization ?? false\r\n    };\r\n\r\n    this.normalizer = new PlantUMLNormalizer({\r\n      debug: this.options.debug,\r\n      preserveComments: this.options.preserveComments,\r\n      preserveWhitespace: this.options.preserveWhitespace\r\n    });\r\n  }\r\n\r\n  parse(source: string, options: ParseOptions = {}): ParseResult {\r\n    const skip = options.skipNormalization ?? this.options.skipNormalization;\r\n\r\n    if (skip) {\r\n      return this.backend.parseNormalized(source, { oldTree: options.oldTree });\r\n    }\r\n\r\n    const norm = this.normalize(source);\r\n    const parsed = this.backend.parseNormalized(norm.normalized, { oldTree: options.oldTree });\r\n\r\n    return {\r\n      tree: parsed.tree,\r\n      normalized: norm.normalized,\r\n      metadata: norm.metadata\r\n    };\r\n  }\r\n\r\n  normalize(source: string): NormalizationResult {\r\n    return this.normalizer.normalize(source);\r\n  }\r\n\r\n  parseNormalized(source: string, options: ParseOptions = {}): ParseResult {\r\n    const parsed = this.backend.parseNormalized(source, { oldTree: options.oldTree });\r\n    return { tree: parsed.tree };\r\n  }\r\n\r\n  parseToJSON(source: string, options: ParseOptions = {}): unknown {\r\n    const { tree } = this.parse(source, options);\r\n    // Tree-sitter nodes serialize poorly; keep simple for now.\r\n    // Consumers should walk tree.rootNode.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return (tree as any)?.rootNode ?? tree;\r\n  }\r\n\r\n  getLanguage(): unknown {\r\n    return this.backend.getLanguage();\r\n  }\r\n\r\n  getParser(): unknown {\r\n    return this.backend.getParser();\r\n  }\r\n\r\n  getNormalizer(): PlantUMLNormalizer {\r\n    return this.normalizer;\r\n  }\r\n}\r\n","import fs from 'node:fs';\r\nimport path from 'node:path';\r\nimport { fileURLToPath } from 'node:url';\r\nimport { createRequire } from 'node:module';\r\n\r\nimport type { PlantUMLBackend } from '../core/backend';\r\n\r\nfunction getRuntimeFileName(): string {\r\n  // In CJS builds, __filename exists.\r\n  // In ESM builds, use import.meta.url.\r\n  // eslint-disable-next-line no-undef\r\n  if (typeof __filename !== 'undefined') return __filename;\r\n  return fileURLToPath(import.meta.url);\r\n}\r\n\r\nfunction findPackageRoot(startDir: string): string {\r\n  let current = startDir;\r\n  for (;;) {\r\n    if (fs.existsSync(path.join(current, 'package.json'))) return current;\r\n    const parent = path.dirname(current);\r\n    if (parent === current) throw new Error('Failed to locate package root (package.json).');\r\n    current = parent;\r\n  }\r\n}\r\n\r\nfunction loadNativeBinding(): { language: unknown } {\r\n  const require = createRequire(\r\n    // eslint-disable-next-line no-undef\r\n    typeof __filename !== 'undefined' ? __filename : import.meta.url\r\n  );\r\n  const startDir = path.dirname(getRuntimeFileName());\r\n  const root = findPackageRoot(startDir);\r\n\r\n  // node-gyp-build will prefer prebuilds/ when present.\r\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n  const load = require('node-gyp-build');\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const binding: any = load(root);\r\n\r\n  if (!binding?.language) {\r\n    throw new Error('Native binding loaded but did not expose language.');\r\n  }\r\n\r\n  return { language: binding.language };\r\n}\r\n\r\nexport function createNodeNativeBackend(): PlantUMLBackend {\r\n  const require = createRequire(\r\n    // eslint-disable-next-line no-undef\r\n    typeof __filename !== 'undefined' ? __filename : import.meta.url\r\n  );\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n  const TreeSitter = require('tree-sitter');\r\n  const Parser = TreeSitter;\r\n\r\n  const { language } = loadNativeBinding();\r\n  const parser = new Parser();\r\n\r\n  // Tree-sitter expects a native language object.\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  (parser as any).setLanguage(language as any);\r\n\r\n  return {\r\n    parseNormalized(source: string, options?: { oldTree?: unknown }) {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const oldTree = options?.oldTree as any;\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const tree = (parser as any).parse(source, oldTree);\r\n      return { tree };\r\n    },\r\n    getLanguage() {\r\n      return language;\r\n    },\r\n    getParser() {\r\n      return parser;\r\n    }\r\n  };\r\n}\r\n","import PlantUMLParser from './core/parser';\r\nimport PlantUMLNormalizer from './normalizer';\r\nimport { createNodeNativeBackend } from './runtimes/node-native';\r\nimport type { ParserInitOptions } from './core/types';\r\n\r\nexport default class PlantUMLParserNode extends PlantUMLParser {\r\n  constructor(options: ParserInitOptions = {}) {\r\n    super(createNodeNativeBackend(), options);\r\n  }\r\n}\r\n\r\nexport { PlantUMLNormalizer };\r\nexport type {\r\n  NormalizationMetadata,\r\n  NormalizationResult,\r\n  ParseOptions,\r\n  ParseResult,\r\n  ParserInitOptions,\r\n  SourceMap\r\n} from './core/types';\r\n"],"mappings":";AAIA,IAAM,cAAc;AAAA,EAClB,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,aAAa;AACf;AAIA,SAAS,gBAAgB,SAAmC;AAC1D,QAAM,gBAA6B;AAAA,IACjC,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,EACd;AAEA,aAAW,SAAS,eAAe;AACjC,QAAI,QAAQ,SAAS,KAAK,EAAG,QAAO;AAAA,EACtC;AACA,SAAO;AACT;AAEA,SAAS,WAAW,SAKX;AACP,QAAM,YAAY,gBAAgB,OAAO;AACzC,MAAI,CAAC,UAAW,QAAO;AAEvB,QAAM,QAAQ,QAAQ,MAAM,SAAS;AACrC,QAAM,SAAS,MAAM,CAAC,GAAG,KAAK,KAAK;AACnC,QAAM,aAAa,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,KAAK,IAAI;AAEhD,MAAI,SAAwB;AAC5B,MAAI,QAAuB;AAE3B,MAAI,YAAY;AACd,QAAI,WAAW,WAAW,GAAG,GAAG;AAC9B,cAAQ,WAAW,UAAU,CAAC,EAAE,KAAK;AAAA,IACvC,OAAO;AACL,YAAM,aAAa,WAAW,QAAQ,GAAG;AACzC,UAAI,eAAe,IAAI;AACrB,iBAAS,WAAW,UAAU,GAAG,UAAU,EAAE,KAAK,KAAK;AACvD,gBAAQ,WAAW,UAAU,aAAa,CAAC,EAAE,KAAK,KAAK;AAAA,MACzD,OAAO;AACL,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAEA,SAAO,EAAE,WAAW,QAAQ,QAAQ,MAAM;AAC5C;AAEO,SAAS,eAAe,SAAiB,SAAS,IAAmB;AAC1E,QAAM,SAAS,WAAW,OAAO;AACjC,MAAI,CAAC,OAAQ,QAAO;AAEpB,QAAM,EAAE,WAAW,QAAQ,QAAQ,MAAM,IAAI;AAE7C,MAAI,aAAa;AACjB,MAAI,OAAQ,eAAc;AAC1B,MAAI,WAAW,SAAS,EAAG,eAAc;AACzC,gBAAc;AACd,MAAI,OAAQ,eAAc,MAAM;AAChC,MAAI,MAAO,eAAc,OAAO;AAEhC,SAAO,GAAG,MAAM,GAAG,UAAU,GAAG,QAAQ;AAC1C;;;AC7DA,IAAqB,qBAArB,MAAwC;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAER,YAAY,UAA6B,CAAC,GAAG;AAC3C,SAAK,QAAQ,QAAQ,SAAS;AAC9B,SAAK,mBAAmB,QAAQ,qBAAqB;AACrD,SAAK,qBAAqB,QAAQ,sBAAsB;AACxD,SAAK,cAAc;AACnB,SAAK,UAAU;AAAA,MACb,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,cAAc;AAAA,MACd,WAAW;AAAA,MACX,qBAAqB,CAAC;AAAA,MACtB,gBAAgB;AAAA,MAChB,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,UAAU,QAAqC;AAC7C,SAAK,aAAa;AAElB,UAAM,QAAQ,OAAO,MAAM,IAAI;AAC/B,UAAM,kBAA4B,CAAC;AACnC,UAAM,+BAAyC,CAAC;AAEhD,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,OAAO,MAAM,CAAC;AACpB,YAAM,aAAa,KAAK,cAAc,MAAM,GAAG,KAAK;AAEpD,UAAI,eAAe,MAAM;AACvB,YAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,0BAAgB,KAAK,GAAG,UAAU;AAClC,mBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAK,8BAA6B,KAAK,CAAC;AAAA,QACjF,OAAO;AACL,0BAAgB,KAAK,UAAU;AAC/B,uCAA6B,KAAK,CAAC;AAAA,QACrC;AAAA,MACF;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,YAAY,eAAe;AAEtD,WAAO;AAAA,MACL,YAAY,cAAc,KAAK,IAAI;AAAA,MACnC,UAAU;AAAA,QACR,GAAG,KAAK,YAAY;AAAA,QACpB,WAAW,EAAE,6BAA6B;AAAA,MAC5C;AAAA,IACF;AAAA,EACF;AAAA,EAEQ,cAAc,MAAc,WAAmB,UAA8C;AACnG,UAAM,UAAU,KAAK,KAAK;AAE1B,SAAK,cAAc,OAAO;AAE1B,QAAI,CAAC,SAAS;AACZ,aAAO,KAAK,qBAAqB,OAAO;AAAA,IAC1C;AAEA,QAAI,QAAQ,WAAW,WAAW,GAAG;AACnC,WAAK,QAAQ,YAAY;AACzB,WAAK,kBAAkB,UAAU,SAAS;AAC1C,aAAO;AAAA,IACT;AAEA,QAAI,YAAY,WAAW;AACzB,WAAK,QAAQ,YAAY;AACzB,aAAO;AAAA,IACT;AAEA,QAAI,CAAC,KAAK,QAAQ,UAAW,QAAO;AAEpC,QAAI,QAAQ,WAAW,GAAG,KAAK,QAAQ,WAAW,IAAI,KAAK,QAAQ,WAAW,IAAI,GAAG;AACnF,aAAO,KAAK,mBAAmB,OAAO;AAAA,IACxC;AAEA,QAAI,aAAa;AAEjB,UAAM,eAAe,KAAK,oBAAoB,YAAY,OAAO;AACjE,QAAI,iBAAiB,WAAY,QAAO;AAExC,UAAM,iBAAiB,KAAK,sBAAsB,YAAY,OAAO;AACrE,QAAI,mBAAmB,WAAY,QAAO;AAE1C,UAAM,cAAc,KAAK,eAAe,YAAY,OAAO;AAC3D,QAAI,gBAAgB,WAAY,QAAO;AAEvC,UAAM,gBAAgB,KAAK,qBAAqB,YAAY,OAAO;AACnE,QAAI,kBAAkB,WAAY,QAAO;AAEzC,UAAM,iBAAiB,KAAK,kBAAkB,YAAY,OAAO;AACjE,QAAI,mBAAmB,WAAY,QAAO;AAE1C,UAAM,aAAa,KAAK,cAAc,YAAY,OAAO;AACzD,QAAI,eAAe,WAAY,QAAO;AAEtC,UAAM,kBAAkB,KAAK,mBAAmB,YAAY,OAAO;AACnE,QAAI,oBAAoB,WAAY,QAAO;AAE3C,WAAO;AAAA,EACT;AAAA,EAEQ,UAAU,MAAsB;AACtC,UAAM,QAAQ,KAAK,MAAM,QAAQ;AACjC,WAAO,QAAQ,MAAM,CAAC,IAAI;AAAA,EAC5B;AAAA,EAEQ,oBAAoB,MAAc,SAAyB;AACjE,QAAI,YAAY,MAAO,QAAO;AAE9B,SAAK,QAAQ,oBAAoB,KAAK,KAAK,QAAQ,SAAS;AAE5D,QAAI,CAAC,KAAK,QAAQ,gBAAgB;AAChC,WAAK,QAAQ,iBAAiB;AAC9B,WAAK,QAAQ,eAAe;AAC5B,WAAK,QAAQ;AACb,aAAO,KAAK,qBAAqB,KAAK,QAAQ,OAAO,OAAO,IAAI;AAAA,IAClE;AAEA,SAAK,QAAQ,eAAe;AAC5B,SAAK,QAAQ;AACb,WAAO,KAAK,qBAAqB,KAAK,QAAQ,OAAO,MAAM,IAAI;AAAA,EACjE;AAAA,EAEQ,sBAAsB,MAAc,SAAyB;AACnE,UAAM,gBAAgB,QAAQ,MAAM,UAAU;AAC9C,QAAI,eAAe;AACjB,WAAK,QAAQ,iBAAiB;AAC9B,WAAK,QAAQ,eAAe;AAC5B,WAAK,QAAQ;AAEb,YAAM,UAAU,cAAc,CAAC,EAAE,KAAK;AACtC,YAAM,SAAS,KAAK,UAAU,IAAI;AAClC,aAAO,GAAG,MAAM,IAAI,OAAO;AAAA,IAC7B;AACA,WAAO;AAAA,EACT;AAAA,EAEQ,eAAe,MAAc,SAAyB;AAC5D,UAAM,SAAS,KAAK,UAAU,IAAI;AAClC,UAAM,aAAa,eAAmB,SAAS,MAAM;AAErD,QAAI,eAAe,MAAM;AACvB,WAAK,QAAQ,iBAAiB;AAC9B,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,qBAAqB,MAAc,SAAyB;AAClE,UAAM,SAAS,KAAK,UAAU,IAAI;AAElC,QAAI,QAAQ,WAAW,KAAK,KAAK,QAAQ,MAAM,UAAU,GAAG;AAC1D,WAAK,QAAQ,iBAAiB;AAE9B,YAAM,QAAQ,QAAQ,MAAM,0CAA0C;AACtE,UAAI,OAAO;AACT,cAAM,YAAY,MAAM,CAAC,EAAE,KAAK;AAChC,cAAM,QAAQ,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM;AACnD,eAAO,GAAG,MAAM,OAAO,SAAS,SAAS,KAAK;AAAA,MAChD;AAEA,YAAM,cAAc,QAAQ,MAAM,yBAAyB;AAC3D,UAAI,aAAa;AACf,cAAM,YAAY,YAAY,CAAC,EAAE,KAAK;AACtC,eAAO,GAAG,MAAM,OAAO,SAAS;AAAA,MAClC;AAAA,IACF;AAEA,QAAI,QAAQ,WAAW,QAAQ,KAAK,QAAQ,MAAM,aAAa,GAAG;AAChE,WAAK,QAAQ,iBAAiB;AAC9B,YAAM,QAAQ,QAAQ,MAAM,2CAA2C;AACvE,UAAI,OAAO;AACT,cAAM,YAAY,MAAM,CAAC,EAAE,KAAK;AAChC,cAAM,QAAQ,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM;AACtD,eAAO,GAAG,MAAM,UAAU,SAAS,IAAI,KAAK;AAAA,MAC9C;AAAA,IACF;AAEA,QAAI,YAAY,UAAU;AACxB,WAAK,QAAQ,iBAAiB;AAC9B,aAAO,GAAG,MAAM;AAAA,IAClB;AAEA,UAAM,kBAAkB,CAAC,QAAQ,UAAU,SAAS,UAAU;AAC9D,eAAW,WAAW,iBAAiB;AACrC,UAAI,YAAY,WAAW,QAAQ,WAAW,UAAU,GAAG,KAAK,QAAQ,WAAW,UAAU,GAAG,GAAG;AACjG,YAAI,YAAY,QAAQ;AACtB,gBAAM,QAAQ,QAAQ,MAAM,yBAAyB;AACrD,cAAI,OAAO;AACT,kBAAM,QAAQ,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM;AACnD,mBAAO,GAAG,MAAM,OAAO,KAAK;AAAA,UAC9B;AAAA,QACF;AAEA,YAAI,YAAY,UAAU;AACxB,gBAAM,QAAQ,QAAQ,MAAM,8CAA8C;AAC1E,cAAI,OAAO;AACT,kBAAM,YAAY,MAAM,CAAC,EAAE,KAAK;AAChC,kBAAM,QAAQ,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM;AACnD,mBAAO,GAAG,MAAM,WAAW,SAAS,SAAS,KAAK;AAAA,UACpD;AAAA,QACF;AAEA,YAAI,YAAY,YAAY;AAC1B,gBAAM,QAAQ,QAAQ,MAAM,6BAA6B;AACzD,cAAI,OAAO;AACT,kBAAM,QAAQ,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM;AACnD,mBAAO,GAAG,MAAM,WAAW,KAAK;AAAA,UAClC;AAAA,QACF;AAEA,YAAI,YAAY,SAAS;AACvB,iBAAO,GAAG,MAAM,GAAG,OAAO;AAAA,QAC5B;AAAA,MACF;AAAA,IACF;AAEA,QAAI,YAAY,UAAU,YAAY,gBAAgB,YAAY,YAAY;AAC5E,aAAO,GAAG,MAAM,GAAG,OAAO;AAAA,IAC5B;AAEA,QAAI,YAAY,WAAW,YAAY,iBAAiB,YAAY,aAAa;AAC/E,aAAO,GAAG,MAAM,GAAG,OAAO;AAAA,IAC5B;AAGA,QAAI,QAAQ,WAAW,cAAc,GAAG;AACtC,WAAK,QAAQ,iBAAiB;AAC9B,aAAO,GAAG,MAAM,GAAG,QAAQ,QAAQ,QAAQ,GAAG,EAAE,KAAK,CAAC;AAAA,IACxD;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,kBAAkB,MAAc,SAAyB;AAC/D,QAAI,QAAQ,WAAW,YAAY,GAAG;AACpC,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAEhE,YAAM,QAAQ,QAAQ,MAAM,2CAA2C;AACvE,UAAI,OAAO;AACT,cAAM,OAAO,MAAM,CAAC,EAAE,KAAK,EAAE,QAAQ,gBAAgB,EAAE;AACvD,cAAM,QAAQ,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,KAAK;AAC1C,cAAM,eAAe,QAAQ,SAAS,GAAG;AACzC,aAAK,QAAQ;AACb,eAAO,GAAG,MAAM,cAAc,IAAI,IAAI,KAAK,GAAG,eAAe,OAAO,EAAE;AAAA,MACxE;AAAA,IACF;AAEA,QAAI,YAAY,OAAO,KAAK,QAAQ,cAAc,GAAG;AACnD,WAAK,QAAQ;AACb,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAChE,aAAO,GAAG,MAAM;AAAA,IAClB;AAEA,UAAM,gBAAgB,QAAQ,MAAM,aAAa;AACjD,QAAI,eAAe;AACjB,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAChE,YAAM,OAAO,cAAc,CAAC,EAAE,KAAK;AACnC,aAAO,GAAG,MAAM,IAAI,IAAI;AAAA,IAC1B;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,cAAc,MAAc,SAAyB;AAC3D,QAAI,QAAQ,WAAW,OAAO,GAAG;AAC/B,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAEhE,YAAM,kBAAkB,QAAQ,MAAM,6CAA6C;AACnF,UAAI,iBAAiB;AACnB,cAAM,WAAW,gBAAgB,CAAC;AAClC,cAAM,UAAU,gBAAgB,CAAC,EAAE,KAAK;AACxC,eAAO,GAAG,MAAM,QAAQ,QAAQ,KAAK,OAAO;AAAA,MAC9C;AAEA,YAAM,iBAAiB,QAAQ,MAAM,kCAAkC;AACvE,UAAI,gBAAgB;AAClB,aAAK,QAAQ,iBAAiB;AAC9B,cAAM,WAAW,eAAe,CAAC;AACjC,eAAO,GAAG,MAAM,QAAQ,QAAQ;AAAA,MAClC;AAAA,IACF;AAEA,QAAI,YAAY,cAAc,KAAK,QAAQ,gBAAgB;AACzD,WAAK,QAAQ,iBAAiB;AAC9B,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAChE,aAAO,GAAG,MAAM;AAAA,IAClB;AAEA,QAAI,KAAK,QAAQ,eAAgB,QAAO;AAExC,WAAO;AAAA,EACT;AAAA,EAEQ,mBAAmB,MAAc,SAAyB;AAChE,QAAI,QAAQ,WAAW,QAAQ,GAAG;AAChC,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAChE,YAAM,QAAQ,QAAQ,UAAU,CAAC,EAAE,KAAK;AACxC,aAAO,GAAG,MAAM,SAAS,KAAK;AAAA,IAChC;AAEA,QAAI,QAAQ,WAAW,YAAY,GAAG;AACpC,YAAM,SAAS,KAAK,qBAAqB,KAAK,UAAU,IAAI,IAAI;AAChE,YAAM,QAAQ,QAAQ,MAAM,4BAA4B;AACxD,UAAI,OAAO;AACT,cAAM,QAAQ,MAAM,CAAC;AACrB,cAAM,QAAQ,MAAM,CAAC,EAAE,KAAK;AAC5B,eAAO,GAAG,MAAM,aAAa,KAAK,IAAI,KAAK;AAAA,MAC7C;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,YAAY,OAA2B;AAG7C,SAAK;AACL,WAAO;AAAA,EACT;AAAA,EAEQ,kBAAkB,OAAiB,YAA0B;AACnE,aAAS,IAAI,aAAa,GAAG,IAAI,KAAK,IAAI,aAAa,IAAI,MAAM,MAAM,GAAG,KAAK;AAC7E,YAAM,OAAO,MAAM,CAAC,EAAE,KAAK;AAE3B,UAAI,KAAK,SAAS,aAAa,KAAK,KAAK,SAAS,OAAO,GAAG;AAC1D,aAAK,cAAc;AACnB;AAAA,MACF;AACA,UAAI,KAAK,SAAS,QAAQ,KAAK,KAAK,SAAS,YAAY,GAAG;AAC1D,aAAK,cAAc;AACnB;AAAA,MACF;AACA,UAAI,KAAK,SAAS,QAAQ,GAAG;AAC3B,aAAK,cAAc;AACnB;AAAA,MACF;AACA,UAAI,KAAK,WAAW,GAAG,KAAK,KAAK,SAAS,OAAO,KAAK,KAAK,SAAS,KAAK,GAAG;AAC1E,aAAK,cAAc;AACnB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EAEQ,cAAc,UAAwB;AAAA,EAE9C;AAAA,EAEQ,eAAqB;AAC3B,SAAK,UAAU;AAAA,MACb,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,cAAc;AAAA,MACd,WAAW;AAAA,MACX,qBAAqB,CAAC;AAAA,MACtB,gBAAgB;AAAA,MAChB,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AACA,SAAK,cAAc;AAAA,EACrB;AAAA,EAEQ,cAAqC;AAC3C,WAAO;AAAA,MACL,aAAa,KAAK;AAAA,MAClB,WAAW,KAAK,QAAQ;AAAA,MACxB,gBAAgB,KAAK,QAAQ,oBAAoB,SAAS;AAAA,MAC1D,iBAAiB,KAAK,QAAQ,oBAAoB;AAAA,IACpD;AAAA,EACF;AAAA;AAAA,EAGQ,OAAO,MAAmB;AAChC,QAAI,KAAK,OAAO;AAEd,cAAQ,IAAI,wBAAwB,GAAG,IAAI;AAAA,IAC7C;AAAA,EACF;AACF;;;ACtZA,IAAqB,iBAArB,MAAoC;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AAAA,EAEjB,YAAY,SAA0B,UAA6B,CAAC,GAAG;AACrE,SAAK,UAAU;AACf,SAAK,UAAU;AAAA,MACb,OAAO,QAAQ,SAAS;AAAA,MACxB,kBAAkB,QAAQ,oBAAoB;AAAA,MAC9C,oBAAoB,QAAQ,sBAAsB;AAAA,MAClD,mBAAmB,QAAQ,qBAAqB;AAAA,IAClD;AAEA,SAAK,aAAa,IAAI,mBAAmB;AAAA,MACvC,OAAO,KAAK,QAAQ;AAAA,MACpB,kBAAkB,KAAK,QAAQ;AAAA,MAC/B,oBAAoB,KAAK,QAAQ;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,QAAgB,UAAwB,CAAC,GAAgB;AAC7D,UAAM,OAAO,QAAQ,qBAAqB,KAAK,QAAQ;AAEvD,QAAI,MAAM;AACR,aAAO,KAAK,QAAQ,gBAAgB,QAAQ,EAAE,SAAS,QAAQ,QAAQ,CAAC;AAAA,IAC1E;AAEA,UAAM,OAAO,KAAK,UAAU,MAAM;AAClC,UAAM,SAAS,KAAK,QAAQ,gBAAgB,KAAK,YAAY,EAAE,SAAS,QAAQ,QAAQ,CAAC;AAEzF,WAAO;AAAA,MACL,MAAM,OAAO;AAAA,MACb,YAAY,KAAK;AAAA,MACjB,UAAU,KAAK;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,UAAU,QAAqC;AAC7C,WAAO,KAAK,WAAW,UAAU,MAAM;AAAA,EACzC;AAAA,EAEA,gBAAgB,QAAgB,UAAwB,CAAC,GAAgB;AACvE,UAAM,SAAS,KAAK,QAAQ,gBAAgB,QAAQ,EAAE,SAAS,QAAQ,QAAQ,CAAC;AAChF,WAAO,EAAE,MAAM,OAAO,KAAK;AAAA,EAC7B;AAAA,EAEA,YAAY,QAAgB,UAAwB,CAAC,GAAY;AAC/D,UAAM,EAAE,KAAK,IAAI,KAAK,MAAM,QAAQ,OAAO;AAI3C,WAAQ,MAAc,YAAY;AAAA,EACpC;AAAA,EAEA,cAAuB;AACrB,WAAO,KAAK,QAAQ,YAAY;AAAA,EAClC;AAAA,EAEA,YAAqB;AACnB,WAAO,KAAK,QAAQ,UAAU;AAAA,EAChC;AAAA,EAEA,gBAAoC;AAClC,WAAO,KAAK;AAAA,EACd;AACF;;;ACtEA,OAAO,QAAQ;AACf,OAAO,UAAU;AACjB,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAI9B,SAAS,qBAA6B;AAIpC,MAAI,OAAO,eAAe,YAAa,QAAO;AAC9C,SAAO,cAAc,YAAY,GAAG;AACtC;AAEA,SAAS,gBAAgB,UAA0B;AACjD,MAAI,UAAU;AACd,aAAS;AACP,QAAI,GAAG,WAAW,KAAK,KAAK,SAAS,cAAc,CAAC,EAAG,QAAO;AAC9D,UAAM,SAAS,KAAK,QAAQ,OAAO;AACnC,QAAI,WAAW,QAAS,OAAM,IAAI,MAAM,+CAA+C;AACvF,cAAU;AAAA,EACZ;AACF;AAEA,SAAS,oBAA2C;AAClD,QAAMA,WAAU;AAAA;AAAA,IAEd,OAAO,eAAe,cAAc,aAAa,YAAY;AAAA,EAC/D;AACA,QAAM,WAAW,KAAK,QAAQ,mBAAmB,CAAC;AAClD,QAAM,OAAO,gBAAgB,QAAQ;AAIrC,QAAM,OAAOA,SAAQ,gBAAgB;AAErC,QAAM,UAAe,KAAK,IAAI;AAE9B,MAAI,CAAC,SAAS,UAAU;AACtB,UAAM,IAAI,MAAM,oDAAoD;AAAA,EACtE;AAEA,SAAO,EAAE,UAAU,QAAQ,SAAS;AACtC;AAEO,SAAS,0BAA2C;AACzD,QAAMA,WAAU;AAAA;AAAA,IAEd,OAAO,eAAe,cAAc,aAAa,YAAY;AAAA,EAC/D;AAGA,QAAM,aAAaA,SAAQ,aAAa;AACxC,QAAM,SAAS;AAEf,QAAM,EAAE,SAAS,IAAI,kBAAkB;AACvC,QAAM,SAAS,IAAI,OAAO;AAI1B,EAAC,OAAe,YAAY,QAAe;AAE3C,SAAO;AAAA,IACL,gBAAgB,QAAgB,SAAiC;AAE/D,YAAM,UAAU,SAAS;AAEzB,YAAM,OAAQ,OAAe,MAAM,QAAQ,OAAO;AAClD,aAAO,EAAE,KAAK;AAAA,IAChB;AAAA,IACA,cAAc;AACZ,aAAO;AAAA,IACT;AAAA,IACA,YAAY;AACV,aAAO;AAAA,IACT;AAAA,EACF;AACF;;;ACzEA,IAAqB,qBAArB,cAAgD,eAAe;AAAA,EAC7D,YAAY,UAA6B,CAAC,GAAG;AAC3C,UAAM,wBAAwB,GAAG,OAAO;AAAA,EAC1C;AACF;","names":["require"]}