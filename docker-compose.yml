version: '3.8'

services:
  plantuml:
    image: plantuml/plantuml-server:jetty
    container_name: plantuml-validator
    ports:
      - "8080:8080"
    environment:
      - PLANTUML_LIMIT_SIZE=8192
      - PLANTUML_SECURITY_PROFILE=INTERNET
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    # Optional: mount custom config (keep `volumes` as an array for Compose schema validity)
    # volumes:
    #   - ./config:/config
    volumes: []
    networks:
      - plantuml-net

networks:
  plantuml-net:
    driver: bridge